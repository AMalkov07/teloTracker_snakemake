# config_label.yaml
# Configuration for Pipeline 2: Reference Labeling
#
# Usage: snakemake -s Snakefile_label -c 56
#
# This pipeline can run in two modes:
#   1. Standard mode: After running Snakefile_create_ref (uses same base_name for everything)
#   2. Independent mode: Use custom reference + different reads for RepeatMasker analysis
#
# =============================================================================
# STANDARD MODE (default)
# =============================================================================
# Just set base_name and strain - pipeline uses outputs from Snakefile_create_ref

# Required: Base name for the analysis
base_name: "dorado_fast5_7575_day0_PromethION_no_tag_yes_rejection"

# Required: Strain identifier
strain: "7575"

# Anchor set name
anchor_set: "test_anchors"

# =============================================================================
# INDEPENDENT MODE (optional overrides)
# =============================================================================
# Use these to run labeling on one reference while analyzing reads from another sample
#
# Example: Label day0 reference, analyze day3 reads for recombination
#   reference_fasta: "path/to/day0_reference.fasta"
#   reads_source:
#     base_name: "dorado_fast5_7575_day3_PromethION_no_tag_yes_rejection"
#     results_dir: "results"  # where Pipeline 1 outputs are for the reads

# Custom reference FASTA for labeling (overrides default Pipeline 1 output)
# If not set, uses: results/{base_name}/assembly_{strain}/assembly_{strain}_dorado_reference.fasta
# reference_fasta: ""

# Reads source for RepeatMasker analysis (if different from base_name)
# Set this to analyze reads from a different sample against the labeled reference
# reads_source:
#   base_name: "dorado_fast5_7575_day3_PromethION_no_tag_yes_rejection"
#   results_dir: "results"

# =============================================================================
# REFERENCE FILES
# =============================================================================
references:
  anchors: "references/test_anchors.fasta"
  # Y prime sequences from RepeatMasker (use strain-specific file)
  repeatmasker_y_primes: "references/repeatmasker_7575_all_y_primes.fasta"
  # X prime sequences for detection (optional)
  xprimes: "references/7575_xprimes.fasta"
  # Y prime probe for verification (optional)
  probe: "references/probe.fasta"

# BLAST parameters for labeling
min_pident: 75.0      # Minimum percent identity (lowered for cross-strain comparison)
min_length: 100       # Minimum alignment length
evalue: "1e-5"        # E-value threshold

# Boundary adjustment parameters (to maximize ITS regions between features)
# Trims telomeric bases from feature boundaries:
#   - R arm: trims T and G from feature ends until hitting A or C
#   - L arm: trims A and C from feature ends until hitting T or G
adjust_boundaries: true
boundary_window: 50   # Minimum feature size to maintain after trimming (bp)
